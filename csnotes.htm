<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<!--
csnotes.htm - AngularJS app to rapidly build customer service call notes
Alan Lee 20180614
-->

<!--TODO: CSS-->

<!--
TODO:
    Reset btn
    History button that opens text file & each note has datetime
-->
    
    
    
</head>
<body ng-app="csnApp" ng-controller="csnController">
    
<button onclick="copyNotes()">Copy</button>
<input id="idNotesBox" type="text" value="{{ notes() }}" style="width: 90%" />
<button ng-click="resetNotes()">Reset</button>


<p>caller: 
<!--    TODO: transferred + outbound + info-->
<input type="radio" ng-model="vCaller" value="MR" />MR
<input type="radio" ng-model="vCaller" value="MRS" />MRS
<input type="radio" ng-model="vCaller" value="MR/MRS" />MR/MRS
<input type="radio" ng-model="vCaller" value="MS" />MS
<input type="radio" ng-model="vCaller" value="MISS" />MISS
<input type="radio" ng-model="vCaller" value="DR" />DR
<input type="radio" ng-model="vCaller" value="Organiser" />Org
<input type="radio" ng-model="vCaller" value="Caller" />Caller
<!--TODO: named-->
<input type="checkbox" ng-model="vAuthorised" />Auth
<!--TODO: can't dpa + no answer-->
</p>

    
<p>subject: 
<input type="checkbox" ng-model="vSubjectDepartment" />Dept
<input type="checkbox" ng-model="vSubjectAutorenewal" />AR
<input type="checkbox" ng-model="vSubjectDocuments" />Docs
<input type="checkbox" ng-model="vSubjectDiscount" />Discount
<input type="checkbox" ng-model="vSubjectDate" />Dates
<input type="checkbox" ng-model="vSubjectDestination" />Dest
<input type="checkbox" ng-model="vSubjectMedical" />Medical
<input type="checkbox" ng-model="vSubjectReferral" />Referral
<input type="checkbox" ng-model="vSubjectAco" />ACO
<input type="checkbox" ng-model="vSubjectStToAmt" />ST->AMT
<input type="checkbox" ng-model="vSubjectCancellation" />Cancel
<input type="checkbox" ng-model="vSubjectAge" />Age
<input type="checkbox" ng-model="vSubjectName" />Name
<input type="checkbox" ng-model="vSubjectAddress" />Address
<input type="checkbox" ng-model="vSubjectPhone" />Phone
<input type="checkbox" ng-model="vSubjectEmail" />Email
<input type="checkbox" ng-model="vSubjectPolicyWording" />PW
<input type="checkbox" ng-model="vSubjectTcs" />T&amp;Cs
<input type="checkbox" ng-model="vSubjectComplaint" />Complaint
<input type="checkbox" ng-model="vSubjectCallListening" />Call List
<input type="checkbox" ng-model="vSubjectQaReport" />QA
<input type="checkbox" ng-model="vSubjectDeceased" />Deceased
</p>

    
<p>action: 
<span ng-repeat="x in dActions">
    <label>
        <input type="checkbox" ng-model="x.checked" />{{ x.lab }} 
    </label>
</span>
</p>
    
    

<script>
function copyNotes() {
    var notesBox = document.getElementById("idNotesBox");
    notesBox.select();
    document.execCommand("copy");
    notesBox.blur();  //removes selection
};

var EMPTY = '';     //empty string
var PLUS =  ' + ';  //builds lists of subjects
var DOT =   '. ';   //builds lists of phrases
var LIST =  ', ';   //builds lists
var SEP =   ' | ';  //separates sections
    
var app = angular.module('csnApp', []);
    
app.controller('csnController', function($scope) {

    $scope.dActions = [
        {checked:false,   lab:'Query',   desc:'Query'},
        {checked:false,   lab:'AROO',    desc:'Opt out'},
        {checked:true,   lab:'UNW AR',  desc:'Unwanted AR'},
        {checked:false,   lab:'444',     desc:'four'}
    ];
    $scope.resetNotes = function() {
        /*var ra;
        for (ra in $scope.dActions) {
            $scope.dActions[ra].checked = false;
        }*/
        $scope.dActions[0].checked = false;
        $scope.dActions[1].checked = false;
        $scope.dActions[2].checked = false;
        $scope.dActions[3].checked = false;
    };

    $scope.noteAuthorised = function() {
        return ($scope.vAuthorised) ? ' (Authorised by Organiser)' : EMPTY;
    };
    $scope.sectCaller = function() {
        return $scope.vCaller + $scope.noteAuthorised() + ' called';
    };
    
    
    $scope.noteSubjectDepartment = function() { 
        return ($scope.vSubjectDepartment) ? 'Department' + PLUS : EMPTY;
    };
    $scope.noteSubjectAutorenewal = function() {
        return ($scope.vSubjectAutorenewal) ? 'Autorenewal' + PLUS : EMPTY;
    };
    $scope.noteSubjectDocuments = function() {
        return ($scope.vSubjectDocuments) ? 'Documents' + PLUS : EMPTY;
    };
    $scope.noteSubjectDiscount = function() {
        return ($scope.vSubjectDiscount) ? 'Discount' + PLUS : EMPTY;
    };
    $scope.noteSubjectDate = function() {
        return ($scope.vSubjectDate) ? 'Dates' + PLUS : EMPTY;
    };
    $scope.noteSubjectDestination = function() {
        return ($scope.vSubjectDestination) ? 'Destination' + PLUS : EMPTY;
    };
    $scope.noteSubjectMedical = function() {
        return ($scope.vSubjectMedical) ? 'Medical' + PLUS : EMPTY;
    };
    $scope.noteSubjectReferral = function() {
        return ($scope.vSubjectReferral) ? 'Referral' + PLUS : EMPTY;
    };
    $scope.noteSubjectAco = function() {
        return ($scope.vSubjectAco) ? 'ACO' + PLUS : EMPTY;
    };
    $scope.noteSubjectStToAmt = function() {
        return ($scope.vSubjectStToAmt) ? 'ST->AMT' + PLUS : EMPTY;
    };
    $scope.noteSubjectCancellation = function() {
        return ($scope.vSubjectCancellation) ? 'Cancellation' + PLUS : EMPTY;
    };
    $scope.noteSubjectAge = function() {
        return ($scope.vSubjectAge) ? 'Age' + PLUS : EMPTY;
    };
    $scope.noteSubjectName = function() {
        return ($scope.vSubjectName) ? 'Name' + PLUS : EMPTY;
    };
    $scope.noteSubjectAddress = function() {
        return ($scope.vSubjectAddress) ? 'Address' + PLUS : EMPTY;
    };
    $scope.noteSubjectPhone = function() {
        return ($scope.vSubjectPhone) ? 'Phone' + PLUS : EMPTY;
    };
    $scope.noteSubjectEmail = function() {
        return ($scope.vSubjectEmail) ? 'Email' + PLUS : EMPTY;
    };
    $scope.noteSubjectPolicyWording = function() {
        return ($scope.vSubjectPolicyWording) ? 'Policy Wording' + PLUS : EMPTY;
    };
    $scope.noteSubjectTcs = function() {
        return ($scope.vSubjectTcs) ? 'T&Cs' + PLUS : EMPTY;
    };
    $scope.noteSubjectComplaint = function() {
        return ($scope.vSubjectComplaint) ? 'Complaint' + PLUS : EMPTY;
    };
    $scope.noteSubjectCallListening = function() {
        return ($scope.vSubjectCallListening) ? 'Call Listening' + PLUS : EMPTY;
    };
    $scope.noteSubjectQaReport = function() {
        return ($scope.vSubjectQaReport) ? 'QA Report' + PLUS : EMPTY;
    };
    $scope.noteSubjectDeceased = function() {
        return ($scope.vSubjectDeceased) ? 'Deceased' + PLUS : EMPTY;
    };
    
    $scope.sectSubjects = function() { 
        var subjects =
            $scope.noteSubjectDepartment() + 
            $scope.noteSubjectAutorenewal() + 
            $scope.noteSubjectDocuments() + 
            $scope.noteSubjectDiscount() + 
            $scope.noteSubjectDate() + 
            $scope.noteSubjectDestination() + 
            $scope.noteSubjectMedical() + 
            $scope.noteSubjectReferral() + 
            $scope.noteSubjectAco() + 
            $scope.noteSubjectStToAmt() + 
            $scope.noteSubjectCancellation() + 
            $scope.noteSubjectAge() + 
            $scope.noteSubjectName() + 
            $scope.noteSubjectAddress() + 
            $scope.noteSubjectPhone() + 
            $scope.noteSubjectEmail() + 
            $scope.noteSubjectPolicyWording() + 
            $scope.noteSubjectTcs() + 
            $scope.noteSubjectComplaint() + 
            $scope.noteSubjectCallListening() +
            $scope.noteSubjectQaReport() +
            $scope.noteSubjectDeceased();
        //remove final PLUS
        return (subjects.length > 0) ? subjects.substr(0, subjects.length - PLUS.length) : EMPTY;
    };

    
    $scope.sectActions = function() { 
        var actions = EMPTY;
        actions += ($scope.dActions[0].checked) ? $scope.dActions[0].desc + DOT : EMPTY;  //must be explicit lines:
        actions += ($scope.dActions[1].checked) ? $scope.dActions[1].desc + DOT : EMPTY;  //doesn't work with angularjs in a for loop
        actions += ($scope.dActions[2].checked) ? $scope.dActions[2].desc + DOT : EMPTY;
        actions += ($scope.dActions[3].checked) ? $scope.dActions[3].desc + DOT : EMPTY;
        //remove final DOT
        return (actions.length > 0) ? actions.substr(0, actions.length - DOT.length) : EMPTY;
    };

    
    $scope.notes = function() {
        var all = EMPTY;
        all += ($scope.sectCaller().length > 0) ? $scope.sectCaller() + SEP : EMPTY;
        all += ($scope.sectSubjects().length > 0) ? $scope.sectSubjects() + SEP : EMPTY;
        all += ($scope.sectActions().length > 0) ? $scope.sectActions() + SEP : EMPTY;
        //remove final SEP
        return (all.length > 0) ? all.substr(0, all.length - SEP.length) : EMPTY;
    };
    
});
</script> 
    


</body>
</html>

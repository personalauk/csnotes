<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<!--
csnotes.htm - AngularJS app to rapidly build customer service call notes
Alan Lee 20180614
-->

<!--TODO: CSS-->

<!--
TODO:
    Reset btn
    History button that opens text file & each note has datetime
-->
    
    
    
</head>
<body ng-app="csnApp" ng-controller="csnController">
    
<button onclick="copyNotes()">Copy</button>
<input id="idNotesBox" type="text" readonly value="{{ notes() }}" style="width: 90%" />
<button ng-click="resetNotes()">Reset</button>


<p>caller: 
<!--    TODO: transferred + outbound + info-->
<input type="radio" ng-model="vCaller" value="MR" />MR
<input type="radio" ng-model="vCaller" value="MRS" />MRS
<input type="radio" ng-model="vCaller" value="MR/MRS" />MR/MRS
<input type="radio" ng-model="vCaller" value="MS" />MS
<input type="radio" ng-model="vCaller" value="MISS" />MISS
<input type="radio" ng-model="vCaller" value="DR" />DR
<input type="radio" ng-model="vCaller" value="Organiser" />Org
<input type="radio" ng-model="vCaller" value="Caller" />Caller
<!--TODO: named-->
<input type="checkbox" ng-model="vAuthorised" />Auth
<!--TODO: can't dpa + no answer-->
</p>

    
<p>subject: 
<span ng-repeat="xs in dSubjects">
    <label>
        <input type="checkbox" ng-model="xs.checked" />{{ xs.lab }} 
    </label>
</span>
<input type="text" ng-show="dSubjects[23].checked" ng-model="vSubjectOther" />
</p>

    
<p>action: 
<span ng-repeat="xa in dActions">
    <label>
        <input type="checkbox" ng-model="xa.checked" />{{ xa.lab }} 
    </label>
</span>
</p>
    
    

<script>
function copyNotes() {
    var notesBox = document.getElementById("idNotesBox");
    notesBox.select();
    document.execCommand("copy");
    notesBox.blur();  //removes selection
}

var EMPTY = '';     //empty string
var PLUS =  ' + ';  //builds lists of subjects
var DOT =   '. ';   //builds lists of phrases
var LIST =  ', ';   //builds lists
var SEP =   ' | ';  //separates sections
    
var app = angular.module('csnApp', []);
    
app.controller('csnController', function($scope) {

    $scope.dSubjects = [
        {lab:'Dept',        desc:'Department'},
        {lab:'AR',          desc:'Autorenewal'},
        {lab:'Docs',        desc:'Documents'},
        {lab:'Disc',        desc:'Discount'},
        {lab:'PM',          desc:'Price Match'},
        {lab:'Date',        desc:'Date'},
        {lab:'Dest',        desc:'Destination'},
        {lab:'Medical',     desc:'Medical'},
        {lab:'Refer',       desc:'Referral'},
        {lab:'ACO',         desc:'ACO'},
        {lab:'ST->AMT',     desc:'ST->AMT'},
        {lab:'Cancel',      desc:'Cancellation'},
        {lab:'Age',         desc:'Age'},
        {lab:'Name',        desc:'Name'},
        {lab:'Addr',        desc:'Address'},
        {lab:'Phone',       desc:'Phone'},
        {lab:'Email',       desc:'Email'},
        {lab:'PW',          desc:'Policy Wording'},
        {lab:'T&Cs',        desc:'T&Cs'},
        {lab:'Complaint',   desc:'Complaint'},
        {lab:'Call List',   desc:'Call Listening'},
        {lab:'QA',          desc:'QA Report'},
        {lab:'Deceased',    desc:'Deceased'},
        {lab:'Other',       desc:EMPTY}
    ];

    $scope.dActions = [
        {lab:'Query',   desc:'Query'},
        {lab:'AROO',    desc:'AR Opt out'},
        {lab:'Unw AR',  desc:'Unwanted AR'},
        {lab:'444',     desc:'four'},
        {lab:'five',    desc:'five'}
    ];
    
    
    $scope.resetNotes = function() {
        $scope.vCaller = EMPTY;
        $scope.vAuthorised = false;
        var sa;
        for (sa in $scope.dSubjects) {
            $scope.dSubjects[sa].checked = false;
        }
        $scope.vSubjectOther = EMPTY;
        var ra;
        for (ra in $scope.dActions) {
            $scope.dActions[ra].checked = false;
        }
    }

    
    $scope.noteAuthorised = function() {
        return ($scope.vAuthorised) ? ' (Authorised by Organiser)' : EMPTY;
    }
    $scope.sectCaller = function() {
        return ($scope.vCaller) ? $scope.vCaller + $scope.noteAuthorised() + ' called' : EMPTY;
    }
    
        
    $scope.sectSubjects = function() { 
        var subjects = EMPTY;
        subjects += ($scope.dSubjects[0].checked) ? $scope.dSubjects[0].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[1].checked) ? $scope.dSubjects[1].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[2].checked) ? $scope.dSubjects[2].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[3].checked) ? $scope.dSubjects[3].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[4].checked) ? $scope.dSubjects[4].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[5].checked) ? $scope.dSubjects[5].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[6].checked) ? $scope.dSubjects[6].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[7].checked) ? $scope.dSubjects[7].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[8].checked) ? $scope.dSubjects[8].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[9].checked) ? $scope.dSubjects[9].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[10].checked) ? $scope.dSubjects[10].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[11].checked) ? $scope.dSubjects[11].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[12].checked) ? $scope.dSubjects[12].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[13].checked) ? $scope.dSubjects[13].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[14].checked) ? $scope.dSubjects[14].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[15].checked) ? $scope.dSubjects[15].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[16].checked) ? $scope.dSubjects[16].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[17].checked) ? $scope.dSubjects[17].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[18].checked) ? $scope.dSubjects[18].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[19].checked) ? $scope.dSubjects[19].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[20].checked) ? $scope.dSubjects[20].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[21].checked) ? $scope.dSubjects[21].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[22].checked) ? $scope.dSubjects[22].desc + PLUS : EMPTY;
        subjects += ($scope.dSubjects[23].checked) ? $scope.vSubjectOther + PLUS : EMPTY;  //synch [n] to vSubjectOther text box
        //remove final PLUS
        return (subjects.length > 0) ? subjects.substr(0, subjects.length - PLUS.length) : EMPTY;
    }

    
    $scope.sectActions = function() { 
        var actions = EMPTY;
        actions += ($scope.dActions[0].checked) ? $scope.dActions[0].desc + DOT : EMPTY;  //must be explicit lines:
        actions += ($scope.dActions[1].checked) ? $scope.dActions[1].desc + DOT : EMPTY;  //doesn't work with angularjs in a for loop
        actions += ($scope.dActions[2].checked) ? $scope.dActions[2].desc + DOT : EMPTY;
        actions += ($scope.dActions[3].checked) ? $scope.dActions[3].desc + DOT : EMPTY;
        actions += ($scope.dActions[4].checked) ? $scope.dActions[4].desc + DOT : EMPTY;
        return actions;
    }

    
    $scope.notes = function() {
        var all = EMPTY;
        all += ($scope.sectCaller().length > 0) ? $scope.sectCaller() + SEP : EMPTY;
        all += ($scope.sectSubjects().length > 0) ? $scope.sectSubjects() + SEP : EMPTY;
        all += ($scope.sectActions().length > 0) ? $scope.sectActions() + SEP : EMPTY;
        //remove final SEP
        return (all.length > 0) ? all.substr(0, all.length - SEP.length) : EMPTY;
    }

    
    //startup with the reset settings
    $scope.resetNotes();
});
</script> 
    


</body>
</html>
